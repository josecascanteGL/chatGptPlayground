77u/PCNAIHRlbXBsYXRlIGxhbmd1YWdlPSJDIyIgZGVidWc9ImZhbHNlIiBo
b3N0c3BlY2lmaWM9InRydWUiIz4KPCNAIGluY2x1ZGUgZmlsZT0iRUY2LlV0
aWxpdHkuQ1MudHRpbmNsdWRlIiM+PCNAIAogb3V0cHV0IGV4dGVuc2lvbj0i
LmNzIiM+PCMKCmNvbnN0IHN0cmluZyBpbnB1dEZpbGUgPSBAIlVuaWNvcm5T
aG9wLmVkbXgiOwp2YXIgdGV4dFRyYW5zZm9ybSA9IER5bmFtaWNUZXh0VHJh
bnNmb3JtYXRpb24uQ3JlYXRlKHRoaXMpOwp2YXIgY29kZSA9IG5ldyBDb2Rl
R2VuZXJhdGlvblRvb2xzKHRoaXMpOwp2YXIgZWYgPSBuZXcgTWV0YWRhdGFU
b29scyh0aGlzKTsKdmFyIHR5cGVNYXBwZXIgPSBuZXcgVHlwZU1hcHBlcihj
b2RlLCBlZiwgdGV4dFRyYW5zZm9ybS5FcnJvcnMpOwp2YXIJZmlsZU1hbmFn
ZXIgPSBFbnRpdHlGcmFtZXdvcmtUZW1wbGF0ZUZpbGVNYW5hZ2VyLkNyZWF0
ZSh0aGlzKTsKdmFyIGl0ZW1Db2xsZWN0aW9uID0gbmV3IEVkbU1ldGFkYXRh
TG9hZGVyKHRleHRUcmFuc2Zvcm0uSG9zdCwgdGV4dFRyYW5zZm9ybS5FcnJv
cnMpLkNyZWF0ZUVkbUl0ZW1Db2xsZWN0aW9uKGlucHV0RmlsZSk7CnZhciBj
b2RlU3RyaW5nR2VuZXJhdG9yID0gbmV3IENvZGVTdHJpbmdHZW5lcmF0b3Io
Y29kZSwgdHlwZU1hcHBlciwgZWYpOwoKaWYgKCF0eXBlTWFwcGVyLlZlcmlm
eUNhc2VJbnNlbnNpdGl2ZVR5cGVVbmlxdWVuZXNzKHR5cGVNYXBwZXIuR2V0
QWxsR2xvYmFsSXRlbXMoaXRlbUNvbGxlY3Rpb24pLCBpbnB1dEZpbGUpKQp7
CiAgICByZXR1cm4gc3RyaW5nLkVtcHR5Owp9CgpXcml0ZUhlYWRlcihjb2Rl
U3RyaW5nR2VuZXJhdG9yLCBmaWxlTWFuYWdlcik7Cgpmb3JlYWNoICh2YXIg
ZW50aXR5IGluIHR5cGVNYXBwZXIuR2V0SXRlbXNUb0dlbmVyYXRlPEVudGl0
eVR5cGU+KGl0ZW1Db2xsZWN0aW9uKSkKewogICAgZmlsZU1hbmFnZXIuU3Rh
cnROZXdGaWxlKGVudGl0eS5OYW1lICsgIi5jcyIpOwogICAgQmVnaW5OYW1l
c3BhY2UoY29kZSk7CiM+CjwjPWNvZGVTdHJpbmdHZW5lcmF0b3IuVXNpbmdE
aXJlY3RpdmVzKGluSGVhZGVyOiBmYWxzZSkjPgo8Iz1jb2RlU3RyaW5nR2Vu
ZXJhdG9yLkVudGl0eUNsYXNzT3BlbmluZyhlbnRpdHkpIz4Kewo8IwogICAg
dmFyIHByb3BlcnRpZXNXaXRoRGVmYXVsdFZhbHVlcyA9IHR5cGVNYXBwZXIu
R2V0UHJvcGVydGllc1dpdGhEZWZhdWx0VmFsdWVzKGVudGl0eSk7CiAgICB2
YXIgY29sbGVjdGlvbk5hdmlnYXRpb25Qcm9wZXJ0aWVzID0gdHlwZU1hcHBl
ci5HZXRDb2xsZWN0aW9uTmF2aWdhdGlvblByb3BlcnRpZXMoZW50aXR5KTsK
ICAgIHZhciBjb21wbGV4UHJvcGVydGllcyA9IHR5cGVNYXBwZXIuR2V0Q29t
cGxleFByb3BlcnRpZXMoZW50aXR5KTsKCiAgICBpZiAocHJvcGVydGllc1dp
dGhEZWZhdWx0VmFsdWVzLkFueSgpIHx8IGNvbGxlY3Rpb25OYXZpZ2F0aW9u
UHJvcGVydGllcy5BbnkoKSB8fCBjb21wbGV4UHJvcGVydGllcy5BbnkoKSkK
ICAgIHsKIz4KICAgIFtTeXN0ZW0uRGlhZ25vc3RpY3MuQ29kZUFuYWx5c2lz
LlN1cHByZXNzTWVzc2FnZSgiTWljcm9zb2Z0LlVzYWdlIiwgIkNBMjIxNDpE
b05vdENhbGxPdmVycmlkYWJsZU1ldGhvZHNJbkNvbnN0cnVjdG9ycyIpXQog
ICAgcHVibGljIDwjPWNvZGUuRXNjYXBlKGVudGl0eSkjPigpCiAgICB7Cjwj
CiAgICAgICAgZm9yZWFjaCAodmFyIGVkbVByb3BlcnR5IGluIHByb3BlcnRp
ZXNXaXRoRGVmYXVsdFZhbHVlcykKICAgICAgICB7CiM+CiAgICAgICAgdGhp
cy48Iz1jb2RlLkVzY2FwZShlZG1Qcm9wZXJ0eSkjPiA9IDwjPXR5cGVNYXBw
ZXIuQ3JlYXRlTGl0ZXJhbChlZG1Qcm9wZXJ0eS5EZWZhdWx0VmFsdWUpIz47
CjwjCiAgICAgICAgfQoKICAgICAgICBmb3JlYWNoICh2YXIgbmF2aWdhdGlv
blByb3BlcnR5IGluIGNvbGxlY3Rpb25OYXZpZ2F0aW9uUHJvcGVydGllcykK
ICAgICAgICB7CiM+CiAgICAgICAgdGhpcy48Iz1jb2RlLkVzY2FwZShuYXZp
Z2F0aW9uUHJvcGVydHkpIz4gPSBuZXcgSGFzaFNldDw8Iz10eXBlTWFwcGVy
LkdldFR5cGVOYW1lKG5hdmlnYXRpb25Qcm9wZXJ0eS5Ub0VuZE1lbWJlci5H
ZXRFbnRpdHlUeXBlKCkpIz4+KCk7CjwjCiAgICAgICAgfQoKICAgICAgICBm
b3JlYWNoICh2YXIgY29tcGxleFByb3BlcnR5IGluIGNvbXBsZXhQcm9wZXJ0
aWVzKQogICAgICAgIHsKIz4KICAgICAgICB0aGlzLjwjPWNvZGUuRXNjYXBl
KGNvbXBsZXhQcm9wZXJ0eSkjPiA9IG5ldyA8Iz10eXBlTWFwcGVyLkdldFR5
cGVOYW1lKGNvbXBsZXhQcm9wZXJ0eS5UeXBlVXNhZ2UpIz4oKTsKPCMKICAg
ICAgICB9CiM+CiAgICB9Cgo8IwogICAgfQoKICAgIHZhciBzaW1wbGVQcm9w
ZXJ0aWVzID0gdHlwZU1hcHBlci5HZXRTaW1wbGVQcm9wZXJ0aWVzKGVudGl0
eSk7CiAgICBpZiAoc2ltcGxlUHJvcGVydGllcy5BbnkoKSkKICAgIHsKICAg
ICAgICBmb3JlYWNoICh2YXIgZWRtUHJvcGVydHkgaW4gc2ltcGxlUHJvcGVy
dGllcykKICAgICAgICB7CiM+CiAgICA8Iz1jb2RlU3RyaW5nR2VuZXJhdG9y
LlByb3BlcnR5KGVkbVByb3BlcnR5KSM+CjwjCiAgICAgICAgfQogICAgfQoK
ICAgIGlmIChjb21wbGV4UHJvcGVydGllcy5BbnkoKSkKICAgIHsKIz4KCjwj
CiAgICAgICAgZm9yZWFjaCh2YXIgY29tcGxleFByb3BlcnR5IGluIGNvbXBs
ZXhQcm9wZXJ0aWVzKQogICAgICAgIHsKIz4KICAgIDwjPWNvZGVTdHJpbmdH
ZW5lcmF0b3IuUHJvcGVydHkoY29tcGxleFByb3BlcnR5KSM+CjwjCiAgICAg
ICAgfQogICAgfQoKICAgIHZhciBuYXZpZ2F0aW9uUHJvcGVydGllcyA9IHR5
cGVNYXBwZXIuR2V0TmF2aWdhdGlvblByb3BlcnRpZXMoZW50aXR5KTsKICAg
IGlmIChuYXZpZ2F0aW9uUHJvcGVydGllcy5BbnkoKSkKICAgIHsKIz4KCjwj
CiAgICAgICAgZm9yZWFjaCAodmFyIG5hdmlnYXRpb25Qcm9wZXJ0eSBpbiBu
YXZpZ2F0aW9uUHJvcGVydGllcykKICAgICAgICB7CiAgICAgICAgICAgIGlm
IChuYXZpZ2F0aW9uUHJvcGVydHkuVG9FbmRNZW1iZXIuUmVsYXRpb25zaGlw
TXVsdGlwbGljaXR5ID09IFJlbGF0aW9uc2hpcE11bHRpcGxpY2l0eS5NYW55
KQogICAgICAgICAgICB7CiM+CiAgICBbU3lzdGVtLkRpYWdub3N0aWNzLkNv
ZGVBbmFseXNpcy5TdXBwcmVzc01lc3NhZ2UoIk1pY3Jvc29mdC5Vc2FnZSIs
ICJDQTIyMjc6Q29sbGVjdGlvblByb3BlcnRpZXNTaG91bGRCZVJlYWRPbmx5
IildCjwjCiAgICAgICAgICAgIH0KIz4KICAgIDwjPWNvZGVTdHJpbmdHZW5l
cmF0b3IuTmF2aWdhdGlvblByb3BlcnR5KG5hdmlnYXRpb25Qcm9wZXJ0eSkj
Pgo8IwogICAgICAgIH0KICAgIH0KIz4KfQo8IwogICAgRW5kTmFtZXNwYWNl
KGNvZGUpOwp9Cgpmb3JlYWNoICh2YXIgY29tcGxleCBpbiB0eXBlTWFwcGVy
LkdldEl0ZW1zVG9HZW5lcmF0ZTxDb21wbGV4VHlwZT4oaXRlbUNvbGxlY3Rp
b24pKQp7CiAgICBmaWxlTWFuYWdlci5TdGFydE5ld0ZpbGUoY29tcGxleC5O
YW1lICsgIi5jcyIpOwogICAgQmVnaW5OYW1lc3BhY2UoY29kZSk7CiM+Cjwj
PWNvZGVTdHJpbmdHZW5lcmF0b3IuVXNpbmdEaXJlY3RpdmVzKGluSGVhZGVy
OiBmYWxzZSwgaW5jbHVkZUNvbGxlY3Rpb25zOiBmYWxzZSkjPgo8Iz1BY2Nl
c3NpYmlsaXR5LkZvclR5cGUoY29tcGxleCkjPiBwYXJ0aWFsIGNsYXNzIDwj
PWNvZGUuRXNjYXBlKGNvbXBsZXgpIz4Kewo8IwogICAgdmFyIGNvbXBsZXhQ
cm9wZXJ0aWVzID0gdHlwZU1hcHBlci5HZXRDb21wbGV4UHJvcGVydGllcyhj
b21wbGV4KTsKICAgIHZhciBwcm9wZXJ0aWVzV2l0aERlZmF1bHRWYWx1ZXMg
PSB0eXBlTWFwcGVyLkdldFByb3BlcnRpZXNXaXRoRGVmYXVsdFZhbHVlcyhj
b21wbGV4KTsKCiAgICBpZiAocHJvcGVydGllc1dpdGhEZWZhdWx0VmFsdWVz
LkFueSgpIHx8IGNvbXBsZXhQcm9wZXJ0aWVzLkFueSgpKQogICAgewojPgog
ICAgcHVibGljIDwjPWNvZGUuRXNjYXBlKGNvbXBsZXgpIz4oKQogICAgewo8
IwogICAgICAgIGZvcmVhY2ggKHZhciBlZG1Qcm9wZXJ0eSBpbiBwcm9wZXJ0
aWVzV2l0aERlZmF1bHRWYWx1ZXMpCiAgICAgICAgewojPgogICAgICAgIHRo
aXMuPCM9Y29kZS5Fc2NhcGUoZWRtUHJvcGVydHkpIz4gPSA8Iz10eXBlTWFw
cGVyLkNyZWF0ZUxpdGVyYWwoZWRtUHJvcGVydHkuRGVmYXVsdFZhbHVlKSM+
Owo8IwogICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAodmFyIGNvbXBsZXhQ
cm9wZXJ0eSBpbiBjb21wbGV4UHJvcGVydGllcykKICAgICAgICB7CiM+CiAg
ICAgICAgdGhpcy48Iz1jb2RlLkVzY2FwZShjb21wbGV4UHJvcGVydHkpIz4g
PSBuZXcgPCM9dHlwZU1hcHBlci5HZXRUeXBlTmFtZShjb21wbGV4UHJvcGVy
dHkuVHlwZVVzYWdlKSM+KCk7CjwjCiAgICAgICAgfQojPgogICAgfQoKPCMK
ICAgIH0KCiAgICB2YXIgc2ltcGxlUHJvcGVydGllcyA9IHR5cGVNYXBwZXIu
R2V0U2ltcGxlUHJvcGVydGllcyhjb21wbGV4KTsKICAgIGlmIChzaW1wbGVQ
cm9wZXJ0aWVzLkFueSgpKQogICAgewogICAgICAgIGZvcmVhY2godmFyIGVk
bVByb3BlcnR5IGluIHNpbXBsZVByb3BlcnRpZXMpCiAgICAgICAgewojPgog
ICAgPCM9Y29kZVN0cmluZ0dlbmVyYXRvci5Qcm9wZXJ0eShlZG1Qcm9wZXJ0
eSkjPgo8IwogICAgICAgIH0KICAgIH0KCiAgICBpZiAoY29tcGxleFByb3Bl
cnRpZXMuQW55KCkpCiAgICB7CiM+Cgo8IwogICAgICAgIGZvcmVhY2godmFy
IGVkbVByb3BlcnR5IGluIGNvbXBsZXhQcm9wZXJ0aWVzKQogICAgICAgIHsK
Iz4KICAgIDwjPWNvZGVTdHJpbmdHZW5lcmF0b3IuUHJvcGVydHkoZWRtUHJv
cGVydHkpIz4KPCMKICAgICAgICB9CiAgICB9CiM+Cn0KPCMKICAgIEVuZE5h
bWVzcGFjZShjb2RlKTsKfQoKZm9yZWFjaCAodmFyIGVudW1UeXBlIGluIHR5
cGVNYXBwZXIuR2V0RW51bUl0ZW1zVG9HZW5lcmF0ZShpdGVtQ29sbGVjdGlv
bikpCnsKICAgIGZpbGVNYW5hZ2VyLlN0YXJ0TmV3RmlsZShlbnVtVHlwZS5O
YW1lICsgIi5jcyIpOwogICAgQmVnaW5OYW1lc3BhY2UoY29kZSk7CiM+Cjwj
PWNvZGVTdHJpbmdHZW5lcmF0b3IuVXNpbmdEaXJlY3RpdmVzKGluSGVhZGVy
OiBmYWxzZSwgaW5jbHVkZUNvbGxlY3Rpb25zOiBmYWxzZSkjPgo8IwogICAg
aWYgKHR5cGVNYXBwZXIuRW51bUlzRmxhZ3MoZW51bVR5cGUpKQogICAgewoj
PgpbRmxhZ3NdCjwjCiAgICB9CiM+CjwjPWNvZGVTdHJpbmdHZW5lcmF0b3Iu
RW51bU9wZW5pbmcoZW51bVR5cGUpIz4Kewo8IwogICAgdmFyIGZvdW5kT25l
ID0gZmFsc2U7CiAgICAKICAgIGZvcmVhY2ggKE1ldGFkYXRhSXRlbSBtZW1i
ZXIgaW4gdHlwZU1hcHBlci5HZXRFbnVtTWVtYmVycyhlbnVtVHlwZSkpCiAg
ICB7CiAgICAgICAgZm91bmRPbmUgPSB0cnVlOwojPgogICAgPCM9Y29kZS5F
c2NhcGUodHlwZU1hcHBlci5HZXRFbnVtTWVtYmVyTmFtZShtZW1iZXIpKSM+
ID0gPCM9dHlwZU1hcHBlci5HZXRFbnVtTWVtYmVyVmFsdWUobWVtYmVyKSM+
LAo8IwogICAgfQoKICAgIGlmIChmb3VuZE9uZSkKICAgIHsKICAgICAgICB0
aGlzLkdlbmVyYXRpb25FbnZpcm9ubWVudC5SZW1vdmUodGhpcy5HZW5lcmF0
aW9uRW52aXJvbm1lbnQuTGVuZ3RoIC0gMywgMSk7CiAgICB9CiM+Cn0KPCMK
ICAgIEVuZE5hbWVzcGFjZShjb2RlKTsKfQoKZmlsZU1hbmFnZXIuUHJvY2Vz
cygpOwoKIz4KPCMrCgpwdWJsaWMgdm9pZCBXcml0ZUhlYWRlcihDb2RlU3Ry
aW5nR2VuZXJhdG9yIGNvZGVTdHJpbmdHZW5lcmF0b3IsIEVudGl0eUZyYW1l
d29ya1RlbXBsYXRlRmlsZU1hbmFnZXIgZmlsZU1hbmFnZXIpCnsKICAgIGZp
bGVNYW5hZ2VyLlN0YXJ0SGVhZGVyKCk7CiM+Ci8vLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tCi8vIDxhdXRvLWdlbmVyYXRlZD4KLy8gPCM9
Q29kZUdlbmVyYXRpb25Ub29scy5HZXRSZXNvdXJjZVN0cmluZygiVGVtcGxh
dGVfR2VuZXJhdGVkQ29kZUNvbW1lbnRMaW5lMSIpIz4KLy8KLy8gPCM9Q29k
ZUdlbmVyYXRpb25Ub29scy5HZXRSZXNvdXJjZVN0cmluZygiVGVtcGxhdGVf
R2VuZXJhdGVkQ29kZUNvbW1lbnRMaW5lMiIpIz4KLy8gPCM9Q29kZUdlbmVy
YXRpb25Ub29scy5HZXRSZXNvdXJjZVN0cmluZygiVGVtcGxhdGVfR2VuZXJh
dGVkQ29kZUNvbW1lbnRMaW5lMyIpIz4KLy8gPC9hdXRvLWdlbmVyYXRlZD4K
Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPCM9Y29kZVN0
cmluZ0dlbmVyYXRvci5Vc2luZ0RpcmVjdGl2ZXMoaW5IZWFkZXI6IHRydWUp
Iz4KPCMrCiAgICBmaWxlTWFuYWdlci5FbmRCbG9jaygpOwp9CgpwdWJsaWMg
dm9pZCBCZWdpbk5hbWVzcGFjZShDb2RlR2VuZXJhdGlvblRvb2xzIGNvZGUp
CnsKICAgIHZhciBjb2RlTmFtZXNwYWNlID0gY29kZS5Wc05hbWVzcGFjZVN1
Z2dlc3Rpb24oKTsKICAgIGlmICghU3RyaW5nLklzTnVsbE9yRW1wdHkoY29k
ZU5hbWVzcGFjZSkpCiAgICB7CiM+Cm5hbWVzcGFjZSA8Iz1jb2RlLkVzY2Fw
ZU5hbWVzcGFjZShjb2RlTmFtZXNwYWNlKSM+CnsKPCMrCiAgICAgICAgUHVz
aEluZGVudCgiICAgICIpOwogICAgfQp9CgpwdWJsaWMgdm9pZCBFbmROYW1l
c3BhY2UoQ29kZUdlbmVyYXRpb25Ub29scyBjb2RlKQp7CiAgICBpZiAoIVN0
cmluZy5Jc051bGxPckVtcHR5KGNvZGUuVnNOYW1lc3BhY2VTdWdnZXN0aW9u
KCkpKQogICAgewogICAgICAgIFBvcEluZGVudCgpOwojPgp9CjwjKwogICAg
fQp9CgpwdWJsaWMgY29uc3Qgc3RyaW5nIFRlbXBsYXRlSWQgPSAiQ1NoYXJw
X0RiQ29udGV4dF9UeXBlc19FRjYiOwoKcHVibGljIGNsYXNzIENvZGVTdHJp
bmdHZW5lcmF0b3IKewogICAgcHJpdmF0ZSByZWFkb25seSBDb2RlR2VuZXJh
dGlvblRvb2xzIF9jb2RlOwogICAgcHJpdmF0ZSByZWFkb25seSBUeXBlTWFw
cGVyIF90eXBlTWFwcGVyOwogICAgcHJpdmF0ZSByZWFkb25seSBNZXRhZGF0
YVRvb2xzIF9lZjsKCiAgICBwdWJsaWMgQ29kZVN0cmluZ0dlbmVyYXRvcihD
b2RlR2VuZXJhdGlvblRvb2xzIGNvZGUsIFR5cGVNYXBwZXIgdHlwZU1hcHBl
ciwgTWV0YWRhdGFUb29scyBlZikKICAgIHsKICAgICAgICBBcmd1bWVudE5v
dE51bGwoY29kZSwgImNvZGUiKTsKICAgICAgICBBcmd1bWVudE5vdE51bGwo
dHlwZU1hcHBlciwgInR5cGVNYXBwZXIiKTsKICAgICAgICBBcmd1bWVudE5v
dE51bGwoZWYsICJlZiIpOwoKICAgICAgICBfY29kZSA9IGNvZGU7CiAgICAg
ICAgX3R5cGVNYXBwZXIgPSB0eXBlTWFwcGVyOwogICAgICAgIF9lZiA9IGVm
OwogICAgfQoKICAgIHB1YmxpYyBzdHJpbmcgUHJvcGVydHkoRWRtUHJvcGVy
dHkgZWRtUHJvcGVydHkpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0cmluZy5G
b3JtYXQoCiAgICAgICAgICAgIEN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1
cmUsCiAgICAgICAgICAgICJ7MH0gezF9IHsyfSB7eyB7M31nZXQ7IHs0fXNl
dDsgfX0iLAogICAgICAgICAgICBBY2Nlc3NpYmlsaXR5LkZvclByb3BlcnR5
KGVkbVByb3BlcnR5KSwKICAgICAgICAgICAgX3R5cGVNYXBwZXIuR2V0VHlw
ZU5hbWUoZWRtUHJvcGVydHkuVHlwZVVzYWdlKSwKICAgICAgICAgICAgX2Nv
ZGUuRXNjYXBlKGVkbVByb3BlcnR5KSwKICAgICAgICAgICAgX2NvZGUuU3Bh
Y2VBZnRlcihBY2Nlc3NpYmlsaXR5LkZvckdldHRlcihlZG1Qcm9wZXJ0eSkp
LAogICAgICAgICAgICBfY29kZS5TcGFjZUFmdGVyKEFjY2Vzc2liaWxpdHku
Rm9yU2V0dGVyKGVkbVByb3BlcnR5KSkpOwogICAgfQoKICAgIHB1YmxpYyBz
dHJpbmcgTmF2aWdhdGlvblByb3BlcnR5KE5hdmlnYXRpb25Qcm9wZXJ0eSBu
YXZQcm9wKQogICAgewogICAgICAgIHZhciBlbmRUeXBlID0gX3R5cGVNYXBw
ZXIuR2V0VHlwZU5hbWUobmF2UHJvcC5Ub0VuZE1lbWJlci5HZXRFbnRpdHlU
eXBlKCkpOwogICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KAogICAgICAg
ICAgICBDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlLAogICAgICAgICAg
ICAiezB9IHsxfSB7Mn0ge3sgezN9Z2V0OyB7NH1zZXQ7IH19IiwKICAgICAg
ICAgICAgQWNjZXNzaWJpbGl0eUFuZFZpcnR1YWwoQWNjZXNzaWJpbGl0eS5G
b3JOYXZpZ2F0aW9uUHJvcGVydHkobmF2UHJvcCkpLAogICAgICAgICAgICBu
YXZQcm9wLlRvRW5kTWVtYmVyLlJlbGF0aW9uc2hpcE11bHRpcGxpY2l0eSA9
PSBSZWxhdGlvbnNoaXBNdWx0aXBsaWNpdHkuTWFueSA/ICgiSUNvbGxlY3Rp
b248IiArIGVuZFR5cGUgKyAiPiIpIDogZW5kVHlwZSwKICAgICAgICAgICAg
X2NvZGUuRXNjYXBlKG5hdlByb3ApLAogICAgICAgICAgICBfY29kZS5TcGFj
ZUFmdGVyKEFjY2Vzc2liaWxpdHkuRm9yR2V0dGVyKG5hdlByb3ApKSwKICAg
ICAgICAgICAgX2NvZGUuU3BhY2VBZnRlcihBY2Nlc3NpYmlsaXR5LkZvclNl
dHRlcihuYXZQcm9wKSkpOwogICAgfQogICAgCiAgICBwdWJsaWMgc3RyaW5n
IEFjY2Vzc2liaWxpdHlBbmRWaXJ0dWFsKHN0cmluZyBhY2Nlc3NpYmlsaXR5
KQogICAgewogICAgICAgIHJldHVybiBhY2Nlc3NpYmlsaXR5ICsgKGFjY2Vz
c2liaWxpdHkgIT0gInByaXZhdGUiID8gIiB2aXJ0dWFsIiA6ICIiKTsKICAg
IH0KICAgIAogICAgcHVibGljIHN0cmluZyBFbnRpdHlDbGFzc09wZW5pbmco
RW50aXR5VHlwZSBlbnRpdHkpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0cmlu
Zy5Gb3JtYXQoCiAgICAgICAgICAgIEN1bHR1cmVJbmZvLkludmFyaWFudEN1
bHR1cmUsCiAgICAgICAgICAgICJ7MH0gezF9cGFydGlhbCBjbGFzcyB7Mn17
M30iLAogICAgICAgICAgICBBY2Nlc3NpYmlsaXR5LkZvclR5cGUoZW50aXR5
KSwKICAgICAgICAgICAgX2NvZGUuU3BhY2VBZnRlcihfY29kZS5BYnN0cmFj
dE9wdGlvbihlbnRpdHkpKSwKICAgICAgICAgICAgX2NvZGUuRXNjYXBlKGVu
dGl0eSksCiAgICAgICAgICAgIF9jb2RlLlN0cmluZ0JlZm9yZSgiIDogIiwg
X3R5cGVNYXBwZXIuR2V0VHlwZU5hbWUoZW50aXR5LkJhc2VUeXBlKSkpOwog
ICAgfQogICAgCiAgICBwdWJsaWMgc3RyaW5nIEVudW1PcGVuaW5nKFNpbXBs
ZVR5cGUgZW51bVR5cGUpCiAgICB7CiAgICAgICAgcmV0dXJuIHN0cmluZy5G
b3JtYXQoCiAgICAgICAgICAgIEN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1
cmUsCiAgICAgICAgICAgICJ7MH0gZW51bSB7MX0gOiB7Mn0iLAogICAgICAg
ICAgICBBY2Nlc3NpYmlsaXR5LkZvclR5cGUoZW51bVR5cGUpLAogICAgICAg
ICAgICBfY29kZS5Fc2NhcGUoZW51bVR5cGUpLAogICAgICAgICAgICBfY29k
ZS5Fc2NhcGUoX3R5cGVNYXBwZXIuVW5kZXJseWluZ0NsclR5cGUoZW51bVR5
cGUpKSk7CiAgICAgICAgfQogICAgCiAgICBwdWJsaWMgdm9pZCBXcml0ZUZ1
bmN0aW9uUGFyYW1ldGVycyhFZG1GdW5jdGlvbiBlZG1GdW5jdGlvbiwgQWN0
aW9uPHN0cmluZywgc3RyaW5nLCBzdHJpbmcsIHN0cmluZz4gd3JpdGVQYXJh
bWV0ZXIpCiAgICB7CiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBGdW5jdGlv
bkltcG9ydFBhcmFtZXRlci5DcmVhdGUoZWRtRnVuY3Rpb24uUGFyYW1ldGVy
cywgX2NvZGUsIF9lZik7CiAgICAgICAgZm9yZWFjaCAodmFyIHBhcmFtZXRl
ciBpbiBwYXJhbWV0ZXJzLldoZXJlKHAgPT4gcC5OZWVkc0xvY2FsVmFyaWFi
bGUpKQogICAgICAgIHsKICAgICAgICAgICAgdmFyIGlzTm90TnVsbCA9IHBh
cmFtZXRlci5Jc051bGxhYmxlT2ZUID8gcGFyYW1ldGVyLkZ1bmN0aW9uUGFy
YW1ldGVyTmFtZSArICIuSGFzVmFsdWUiIDogcGFyYW1ldGVyLkZ1bmN0aW9u
UGFyYW1ldGVyTmFtZSArICIgIT0gbnVsbCI7CiAgICAgICAgICAgIHZhciBu
b3ROdWxsSW5pdCA9ICJuZXcgT2JqZWN0UGFyYW1ldGVyKFwiIiArIHBhcmFt
ZXRlci5Fc3FsUGFyYW1ldGVyTmFtZSArICJcIiwgIiArIHBhcmFtZXRlci5G
dW5jdGlvblBhcmFtZXRlck5hbWUgKyAiKSI7CiAgICAgICAgICAgIHZhciBu
dWxsSW5pdCA9ICJuZXcgT2JqZWN0UGFyYW1ldGVyKFwiIiArIHBhcmFtZXRl
ci5Fc3FsUGFyYW1ldGVyTmFtZSArICJcIiwgdHlwZW9mKCIgKyBUeXBlTWFw
cGVyLkZpeE5hbWVzcGFjZXMocGFyYW1ldGVyLlJhd0NsclR5cGVOYW1lKSAr
ICIpKSI7CiAgICAgICAgICAgIHdyaXRlUGFyYW1ldGVyKHBhcmFtZXRlci5M
b2NhbFZhcmlhYmxlTmFtZSwgaXNOb3ROdWxsLCBub3ROdWxsSW5pdCwgbnVs
bEluaXQpOwogICAgICAgIH0KICAgIH0KICAgIAogICAgcHVibGljIHN0cmlu
ZyBDb21wb3NhYmxlRnVuY3Rpb25NZXRob2QoRWRtRnVuY3Rpb24gZWRtRnVu
Y3Rpb24sIHN0cmluZyBtb2RlbE5hbWVzcGFjZSkKICAgIHsKICAgICAgICB2
YXIgcGFyYW1ldGVycyA9IF90eXBlTWFwcGVyLkdldFBhcmFtZXRlcnMoZWRt
RnVuY3Rpb24pOwogICAgICAgIAogICAgICAgIHJldHVybiBzdHJpbmcuRm9y
bWF0KAogICAgICAgICAgICBDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJl
LAogICAgICAgICAgICAiezB9IElRdWVyeWFibGU8ezF9PiB7Mn0oezN9KSIs
CiAgICAgICAgICAgIEFjY2Vzc2liaWxpdHlBbmRWaXJ0dWFsKEFjY2Vzc2li
aWxpdHkuRm9yTWV0aG9kKGVkbUZ1bmN0aW9uKSksCiAgICAgICAgICAgIF90
eXBlTWFwcGVyLkdldFR5cGVOYW1lKF90eXBlTWFwcGVyLkdldFJldHVyblR5
cGUoZWRtRnVuY3Rpb24pLCBtb2RlbE5hbWVzcGFjZSksCiAgICAgICAgICAg
IF9jb2RlLkVzY2FwZShlZG1GdW5jdGlvbiksCiAgICAgICAgICAgIHN0cmlu
Zy5Kb2luKCIsICIsIHBhcmFtZXRlcnMuU2VsZWN0KHAgPT4gVHlwZU1hcHBl
ci5GaXhOYW1lc3BhY2VzKHAuRnVuY3Rpb25QYXJhbWV0ZXJUeXBlKSArICIg
IiArIHAuRnVuY3Rpb25QYXJhbWV0ZXJOYW1lKS5Ub0FycmF5KCkpKTsKICAg
IH0KICAgIAogICAgcHVibGljIHN0cmluZyBDb21wb3NhYmxlQ3JlYXRlUXVl
cnkoRWRtRnVuY3Rpb24gZWRtRnVuY3Rpb24sIHN0cmluZyBtb2RlbE5hbWVz
cGFjZSkKICAgIHsKICAgICAgICB2YXIgcGFyYW1ldGVycyA9IF90eXBlTWFw
cGVyLkdldFBhcmFtZXRlcnMoZWRtRnVuY3Rpb24pOwogICAgICAgIAogICAg
ICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KAogICAgICAgICAgICBDdWx0dXJl
SW5mby5JbnZhcmlhbnRDdWx0dXJlLAogICAgICAgICAgICAicmV0dXJuICgo
SU9iamVjdENvbnRleHRBZGFwdGVyKXRoaXMpLk9iamVjdENvbnRleHQuQ3Jl
YXRlUXVlcnk8ezB9PihcIlt7MX1dLlt7Mn1dKHszfSlcIns0fSk7IiwKICAg
ICAgICAgICAgX3R5cGVNYXBwZXIuR2V0VHlwZU5hbWUoX3R5cGVNYXBwZXIu
R2V0UmV0dXJuVHlwZShlZG1GdW5jdGlvbiksIG1vZGVsTmFtZXNwYWNlKSwK
ICAgICAgICAgICAgZWRtRnVuY3Rpb24uTmFtZXNwYWNlTmFtZSwKICAgICAg
ICAgICAgZWRtRnVuY3Rpb24uTmFtZSwKICAgICAgICAgICAgc3RyaW5nLkpv
aW4oIiwgIiwgcGFyYW1ldGVycy5TZWxlY3QocCA9PiAiQCIgKyBwLkVzcWxQ
YXJhbWV0ZXJOYW1lKS5Ub0FycmF5KCkpLAogICAgICAgICAgICBfY29kZS5T
dHJpbmdCZWZvcmUoIiwgIiwgc3RyaW5nLkpvaW4oIiwgIiwgcGFyYW1ldGVy
cy5TZWxlY3QocCA9PiBwLkV4ZWN1dGVQYXJhbWV0ZXJOYW1lKS5Ub0FycmF5
KCkpKSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBzdHJpbmcgRnVuY3Rpb25N
ZXRob2QoRWRtRnVuY3Rpb24gZWRtRnVuY3Rpb24sIHN0cmluZyBtb2RlbE5h
bWVzcGFjZSwgYm9vbCBpbmNsdWRlTWVyZ2VPcHRpb24pCiAgICB7CiAgICAg
ICAgdmFyIHBhcmFtZXRlcnMgPSBfdHlwZU1hcHBlci5HZXRQYXJhbWV0ZXJz
KGVkbUZ1bmN0aW9uKTsKICAgICAgICB2YXIgcmV0dXJuVHlwZSA9IF90eXBl
TWFwcGVyLkdldFJldHVyblR5cGUoZWRtRnVuY3Rpb24pOwoKICAgICAgICB2
YXIgcGFyYW1MaXN0ID0gU3RyaW5nLkpvaW4oIiwgIiwgcGFyYW1ldGVycy5T
ZWxlY3QocCA9PiBUeXBlTWFwcGVyLkZpeE5hbWVzcGFjZXMocC5GdW5jdGlv
blBhcmFtZXRlclR5cGUpICsgIiAiICsgcC5GdW5jdGlvblBhcmFtZXRlck5h
bWUpLlRvQXJyYXkoKSk7CiAgICAgICAgaWYgKGluY2x1ZGVNZXJnZU9wdGlv
bikKICAgICAgICB7CiAgICAgICAgICAgIHBhcmFtTGlzdCA9IF9jb2RlLlN0
cmluZ0FmdGVyKHBhcmFtTGlzdCwgIiwgIikgKyAiTWVyZ2VPcHRpb24gbWVy
Z2VPcHRpb24iOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHN0cmluZy5G
b3JtYXQoCiAgICAgICAgICAgIEN1bHR1cmVJbmZvLkludmFyaWFudEN1bHR1
cmUsCiAgICAgICAgICAgICJ7MH0gezF9IHsyfSh7M30pIiwKICAgICAgICAg
ICAgQWNjZXNzaWJpbGl0eUFuZFZpcnR1YWwoQWNjZXNzaWJpbGl0eS5Gb3JN
ZXRob2QoZWRtRnVuY3Rpb24pKSwKICAgICAgICAgICAgcmV0dXJuVHlwZSA9
PSBudWxsID8gImludCIgOiAiT2JqZWN0UmVzdWx0PCIgKyBfdHlwZU1hcHBl
ci5HZXRUeXBlTmFtZShyZXR1cm5UeXBlLCBtb2RlbE5hbWVzcGFjZSkgKyAi
PiIsCiAgICAgICAgICAgIF9jb2RlLkVzY2FwZShlZG1GdW5jdGlvbiksCiAg
ICAgICAgICAgIHBhcmFtTGlzdCk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBz
dHJpbmcgRXhlY3V0ZUZ1bmN0aW9uKEVkbUZ1bmN0aW9uIGVkbUZ1bmN0aW9u
LCBzdHJpbmcgbW9kZWxOYW1lc3BhY2UsIGJvb2wgaW5jbHVkZU1lcmdlT3B0
aW9uKQogICAgewogICAgICAgIHZhciBwYXJhbWV0ZXJzID0gX3R5cGVNYXBw
ZXIuR2V0UGFyYW1ldGVycyhlZG1GdW5jdGlvbik7CiAgICAgICAgdmFyIHJl
dHVyblR5cGUgPSBfdHlwZU1hcHBlci5HZXRSZXR1cm5UeXBlKGVkbUZ1bmN0
aW9uKTsKCiAgICAgICAgdmFyIGNhbGxQYXJhbXMgPSBfY29kZS5TdHJpbmdC
ZWZvcmUoIiwgIiwgU3RyaW5nLkpvaW4oIiwgIiwgcGFyYW1ldGVycy5TZWxl
Y3QocCA9PiBwLkV4ZWN1dGVQYXJhbWV0ZXJOYW1lKS5Ub0FycmF5KCkpKTsK
ICAgICAgICBpZiAoaW5jbHVkZU1lcmdlT3B0aW9uKQogICAgICAgIHsKICAg
ICAgICAgICAgY2FsbFBhcmFtcyA9ICIsIG1lcmdlT3B0aW9uIiArIGNhbGxQ
YXJhbXM7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBzdHJp
bmcuRm9ybWF0KAogICAgICAgICAgICBDdWx0dXJlSW5mby5JbnZhcmlhbnRD
dWx0dXJlLAogICAgICAgICAgICAicmV0dXJuICgoSU9iamVjdENvbnRleHRB
ZGFwdGVyKXRoaXMpLk9iamVjdENvbnRleHQuRXhlY3V0ZUZ1bmN0aW9uezB9
KFwiezF9XCJ7Mn0pOyIsCiAgICAgICAgICAgIHJldHVyblR5cGUgPT0gbnVs
bCA/ICIiIDogIjwiICsgX3R5cGVNYXBwZXIuR2V0VHlwZU5hbWUocmV0dXJu
VHlwZSwgbW9kZWxOYW1lc3BhY2UpICsgIj4iLAogICAgICAgICAgICBlZG1G
dW5jdGlvbi5OYW1lLAogICAgICAgICAgICBjYWxsUGFyYW1zKTsKICAgIH0K
ICAgIAogICAgcHVibGljIHN0cmluZyBEYlNldChFbnRpdHlTZXQgZW50aXR5
U2V0KQogICAgewogICAgICAgIHJldHVybiBzdHJpbmcuRm9ybWF0KAogICAg
ICAgICAgICBDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJlLAogICAgICAg
ICAgICAiezB9IHZpcnR1YWwgRGJTZXQ8ezF9PiB7Mn0ge3sgZ2V0OyBzZXQ7
IH19IiwKICAgICAgICAgICAgQWNjZXNzaWJpbGl0eS5Gb3JSZWFkT25seVBy
b3BlcnR5KGVudGl0eVNldCksCiAgICAgICAgICAgIF90eXBlTWFwcGVyLkdl
dFR5cGVOYW1lKGVudGl0eVNldC5FbGVtZW50VHlwZSksCiAgICAgICAgICAg
IF9jb2RlLkVzY2FwZShlbnRpdHlTZXQpKTsKICAgIH0KCiAgICBwdWJsaWMg
c3RyaW5nIFVzaW5nRGlyZWN0aXZlcyhib29sIGluSGVhZGVyLCBib29sIGlu
Y2x1ZGVDb2xsZWN0aW9ucyA9IHRydWUpCiAgICB7CiAgICAgICAgcmV0dXJu
IGluSGVhZGVyID09IHN0cmluZy5Jc051bGxPckVtcHR5KF9jb2RlLlZzTmFt
ZXNwYWNlU3VnZ2VzdGlvbigpKQogICAgICAgICAgICA/IHN0cmluZy5Gb3Jt
YXQoCiAgICAgICAgICAgICAgICBDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0
dXJlLAogICAgICAgICAgICAgICAgInswfXVzaW5nIFN5c3RlbTt7MX0iICsK
ICAgICAgICAgICAgICAgICJ7Mn0iLAogICAgICAgICAgICAgICAgaW5IZWFk
ZXIgPyBFbnZpcm9ubWVudC5OZXdMaW5lIDogIiIsCiAgICAgICAgICAgICAg
ICBpbmNsdWRlQ29sbGVjdGlvbnMgPyAoRW52aXJvbm1lbnQuTmV3TGluZSAr
ICJ1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsiKSA6ICIiLAog
ICAgICAgICAgICAgICAgaW5IZWFkZXIgPyAiIiA6IEVudmlyb25tZW50Lk5l
d0xpbmUpCiAgICAgICAgICAgIDogIiI7CiAgICB9Cn0KCnB1YmxpYyBjbGFz
cyBUeXBlTWFwcGVyCnsKICAgIHByaXZhdGUgY29uc3Qgc3RyaW5nIEV4dGVy
bmFsVHlwZU5hbWVBdHRyaWJ1dGVOYW1lID0gQCJodHRwOi8vc2NoZW1hcy5t
aWNyb3NvZnQuY29tL2Fkby8yMDA2LzA0L2NvZGVnZW5lcmF0aW9uOkV4dGVy
bmFsVHlwZU5hbWUiOwoKICAgIHByaXZhdGUgcmVhZG9ubHkgU3lzdGVtLkNv
bGxlY3Rpb25zLklMaXN0IF9lcnJvcnM7CiAgICBwcml2YXRlIHJlYWRvbmx5
IENvZGVHZW5lcmF0aW9uVG9vbHMgX2NvZGU7CiAgICBwcml2YXRlIHJlYWRv
bmx5IE1ldGFkYXRhVG9vbHMgX2VmOwoKICAgIHB1YmxpYyBUeXBlTWFwcGVy
KENvZGVHZW5lcmF0aW9uVG9vbHMgY29kZSwgTWV0YWRhdGFUb29scyBlZiwg
U3lzdGVtLkNvbGxlY3Rpb25zLklMaXN0IGVycm9ycykKICAgIHsKICAgICAg
ICBBcmd1bWVudE5vdE51bGwoY29kZSwgImNvZGUiKTsKICAgICAgICBBcmd1
bWVudE5vdE51bGwoZWYsICJlZiIpOwogICAgICAgIEFyZ3VtZW50Tm90TnVs
bChlcnJvcnMsICJlcnJvcnMiKTsKCiAgICAgICAgX2NvZGUgPSBjb2RlOwog
ICAgICAgIF9lZiA9IGVmOwogICAgICAgIF9lcnJvcnMgPSBlcnJvcnM7CiAg
ICB9CgogICAgcHVibGljIHN0YXRpYyBzdHJpbmcgRml4TmFtZXNwYWNlcyhz
dHJpbmcgdHlwZU5hbWUpCiAgICB7CiAgICAgICAgcmV0dXJuIHR5cGVOYW1l
LlJlcGxhY2UoIlN5c3RlbS5EYXRhLlNwYXRpYWwuIiwgIlN5c3RlbS5EYXRh
LkVudGl0eS5TcGF0aWFsLiIpOwogICAgfQoKICAgIHB1YmxpYyBzdHJpbmcg
R2V0VHlwZU5hbWUoVHlwZVVzYWdlIHR5cGVVc2FnZSkKICAgIHsKICAgICAg
ICByZXR1cm4gdHlwZVVzYWdlID09IG51bGwgPyBudWxsIDogR2V0VHlwZU5h
bWUodHlwZVVzYWdlLkVkbVR5cGUsIF9lZi5Jc051bGxhYmxlKHR5cGVVc2Fn
ZSksIG1vZGVsTmFtZXNwYWNlOiBudWxsKTsKICAgIH0KCiAgICBwdWJsaWMg
c3RyaW5nIEdldFR5cGVOYW1lKEVkbVR5cGUgZWRtVHlwZSkKICAgIHsKICAg
ICAgICByZXR1cm4gR2V0VHlwZU5hbWUoZWRtVHlwZSwgaXNOdWxsYWJsZTog
bnVsbCwgbW9kZWxOYW1lc3BhY2U6IG51bGwpOwogICAgfQoKICAgIHB1Ymxp
YyBzdHJpbmcgR2V0VHlwZU5hbWUoVHlwZVVzYWdlIHR5cGVVc2FnZSwgc3Ry
aW5nIG1vZGVsTmFtZXNwYWNlKQogICAgewogICAgICAgIHJldHVybiB0eXBl
VXNhZ2UgPT0gbnVsbCA/IG51bGwgOiBHZXRUeXBlTmFtZSh0eXBlVXNhZ2Uu
RWRtVHlwZSwgX2VmLklzTnVsbGFibGUodHlwZVVzYWdlKSwgbW9kZWxOYW1l
c3BhY2UpOwogICAgfQoKICAgIHB1YmxpYyBzdHJpbmcgR2V0VHlwZU5hbWUo
RWRtVHlwZSBlZG1UeXBlLCBzdHJpbmcgbW9kZWxOYW1lc3BhY2UpCiAgICB7
CiAgICAgICAgcmV0dXJuIEdldFR5cGVOYW1lKGVkbVR5cGUsIGlzTnVsbGFi
bGU6IG51bGwsIG1vZGVsTmFtZXNwYWNlOiBtb2RlbE5hbWVzcGFjZSk7CiAg
ICB9CgogICAgcHVibGljIHN0cmluZyBHZXRUeXBlTmFtZShFZG1UeXBlIGVk
bVR5cGUsIGJvb2w/IGlzTnVsbGFibGUsIHN0cmluZyBtb2RlbE5hbWVzcGFj
ZSkKICAgIHsKICAgICAgICBpZiAoZWRtVHlwZSA9PSBudWxsKQogICAgICAg
IHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQoKICAgICAg
ICB2YXIgY29sbGVjdGlvblR5cGUgPSBlZG1UeXBlIGFzIENvbGxlY3Rpb25U
eXBlOwogICAgICAgIGlmIChjb2xsZWN0aW9uVHlwZSAhPSBudWxsKQogICAg
ICAgIHsKICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5Gb3JtYXQoQ3VsdHVy
ZUluZm8uSW52YXJpYW50Q3VsdHVyZSwgIklDb2xsZWN0aW9uPHswfT4iLCBH
ZXRUeXBlTmFtZShjb2xsZWN0aW9uVHlwZS5UeXBlVXNhZ2UsIG1vZGVsTmFt
ZXNwYWNlKSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgdHlwZU5hbWUgPSBf
Y29kZS5Fc2NhcGUoZWRtVHlwZS5NZXRhZGF0YVByb3BlcnRpZXMKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAuV2hlcmUocCA9PiBwLk5hbWUg
PT0gRXh0ZXJuYWxUeXBlTmFtZUF0dHJpYnV0ZU5hbWUpCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgLlNlbGVjdChwID0+IChzdHJpbmcpcC5W
YWx1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuRmlyc3RP
ckRlZmF1bHQoKSkKICAgICAgICAgICAgPz8gKG1vZGVsTmFtZXNwYWNlICE9
IG51bGwgJiYgZWRtVHlwZS5OYW1lc3BhY2VOYW1lICE9IG1vZGVsTmFtZXNw
YWNlID8KICAgICAgICAgICAgICAgIF9jb2RlLkNyZWF0ZUZ1bGxOYW1lKF9j
b2RlLkVzY2FwZU5hbWVzcGFjZShlZG1UeXBlLk5hbWVzcGFjZU5hbWUpLCBf
Y29kZS5Fc2NhcGUoZWRtVHlwZSkpIDoKICAgICAgICAgICAgICAgIF9jb2Rl
LkVzY2FwZShlZG1UeXBlKSk7CgogICAgICAgIGlmIChlZG1UeXBlIGlzIFN0
cnVjdHVyYWxUeXBlKQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIHR5
cGVOYW1lOwogICAgICAgIH0KCiAgICAgICAgaWYgKGVkbVR5cGUgaXMgU2lt
cGxlVHlwZSkKICAgICAgICB7CiAgICAgICAgICAgIHZhciBjbHJUeXBlID0g
VW5kZXJseWluZ0NsclR5cGUoZWRtVHlwZSk7CiAgICAgICAgICAgIGlmICgh
SXNFbnVtVHlwZShlZG1UeXBlKSkKICAgICAgICAgICAgewogICAgICAgICAg
ICAgICAgdHlwZU5hbWUgPSBfY29kZS5Fc2NhcGUoY2xyVHlwZSk7CiAgICAg
ICAgICAgIH0KCiAgICAgICAgICAgIHR5cGVOYW1lID0gRml4TmFtZXNwYWNl
cyh0eXBlTmFtZSk7CgogICAgICAgICAgICByZXR1cm4gY2xyVHlwZS5Jc1Zh
bHVlVHlwZSAmJiBpc051bGxhYmxlID09IHRydWUgPwogICAgICAgICAgICAg
ICAgU3RyaW5nLkZvcm1hdChDdWx0dXJlSW5mby5JbnZhcmlhbnRDdWx0dXJl
LCAiTnVsbGFibGU8ezB9PiIsIHR5cGVOYW1lKSA6CiAgICAgICAgICAgICAg
ICB0eXBlTmFtZTsKICAgICAgICB9CgogICAgICAgIHRocm93IG5ldyBBcmd1
bWVudEV4Y2VwdGlvbigiZWRtVHlwZSIpOwogICAgfQogICAgCiAgICBwdWJs
aWMgVHlwZSBVbmRlcmx5aW5nQ2xyVHlwZShFZG1UeXBlIGVkbVR5cGUpCiAg
ICB7CiAgICAgICAgQXJndW1lbnROb3ROdWxsKGVkbVR5cGUsICJlZG1UeXBl
Iik7CgogICAgICAgIHZhciBwcmltaXRpdmVUeXBlID0gZWRtVHlwZSBhcyBQ
cmltaXRpdmVUeXBlOwogICAgICAgIGlmIChwcmltaXRpdmVUeXBlICE9IG51
bGwpCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gcHJpbWl0aXZlVHlw
ZS5DbHJFcXVpdmFsZW50VHlwZTsKICAgICAgICB9CgogICAgICAgIGlmIChJ
c0VudW1UeXBlKGVkbVR5cGUpKQogICAgICAgIHsKICAgICAgICAgICAgcmV0
dXJuIEdldEVudW1VbmRlcmx5aW5nVHlwZShlZG1UeXBlKS5DbHJFcXVpdmFs
ZW50VHlwZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0eXBlb2Yob2Jq
ZWN0KTsKICAgIH0KICAgIAogICAgcHVibGljIG9iamVjdCBHZXRFbnVtTWVt
YmVyVmFsdWUoTWV0YWRhdGFJdGVtIGVudW1NZW1iZXIpCiAgICB7CiAgICAg
ICAgQXJndW1lbnROb3ROdWxsKGVudW1NZW1iZXIsICJlbnVtTWVtYmVyIik7
CiAgICAgICAgCiAgICAgICAgdmFyIHZhbHVlUHJvcGVydHkgPSBlbnVtTWVt
YmVyLkdldFR5cGUoKS5HZXRQcm9wZXJ0eSgiVmFsdWUiKTsKICAgICAgICBy
ZXR1cm4gdmFsdWVQcm9wZXJ0eSA9PSBudWxsID8gbnVsbCA6IHZhbHVlUHJv
cGVydHkuR2V0VmFsdWUoZW51bU1lbWJlciwgbnVsbCk7CiAgICB9CiAgICAK
ICAgIHB1YmxpYyBzdHJpbmcgR2V0RW51bU1lbWJlck5hbWUoTWV0YWRhdGFJ
dGVtIGVudW1NZW1iZXIpCiAgICB7CiAgICAgICAgQXJndW1lbnROb3ROdWxs
KGVudW1NZW1iZXIsICJlbnVtTWVtYmVyIik7CiAgICAgICAgCiAgICAgICAg
dmFyIG5hbWVQcm9wZXJ0eSA9IGVudW1NZW1iZXIuR2V0VHlwZSgpLkdldFBy
b3BlcnR5KCJOYW1lIik7CiAgICAgICAgcmV0dXJuIG5hbWVQcm9wZXJ0eSA9
PSBudWxsID8gbnVsbCA6IChzdHJpbmcpbmFtZVByb3BlcnR5LkdldFZhbHVl
KGVudW1NZW1iZXIsIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBTeXN0ZW0u
Q29sbGVjdGlvbnMuSUVudW1lcmFibGUgR2V0RW51bU1lbWJlcnMoRWRtVHlw
ZSBlbnVtVHlwZSkKICAgIHsKICAgICAgICBBcmd1bWVudE5vdE51bGwoZW51
bVR5cGUsICJlbnVtVHlwZSIpOwoKICAgICAgICB2YXIgbWVtYmVyc1Byb3Bl
cnR5ID0gZW51bVR5cGUuR2V0VHlwZSgpLkdldFByb3BlcnR5KCJNZW1iZXJz
Iik7CiAgICAgICAgcmV0dXJuIG1lbWJlcnNQcm9wZXJ0eSAhPSBudWxsIAog
ICAgICAgICAgICA/IChTeXN0ZW0uQ29sbGVjdGlvbnMuSUVudW1lcmFibGUp
bWVtYmVyc1Byb3BlcnR5LkdldFZhbHVlKGVudW1UeXBlLCBudWxsKQogICAg
ICAgICAgICA6IEVudW1lcmFibGUuRW1wdHk8TWV0YWRhdGFJdGVtPigpOwog
ICAgfQogICAgCiAgICBwdWJsaWMgYm9vbCBFbnVtSXNGbGFncyhFZG1UeXBl
IGVudW1UeXBlKQogICAgewogICAgICAgIEFyZ3VtZW50Tm90TnVsbChlbnVt
VHlwZSwgImVudW1UeXBlIik7CiAgICAgICAgCiAgICAgICAgdmFyIGlzRmxh
Z3NQcm9wZXJ0eSA9IGVudW1UeXBlLkdldFR5cGUoKS5HZXRQcm9wZXJ0eSgi
SXNGbGFncyIpOwogICAgICAgIHJldHVybiBpc0ZsYWdzUHJvcGVydHkgIT0g
bnVsbCAmJiAoYm9vbClpc0ZsYWdzUHJvcGVydHkuR2V0VmFsdWUoZW51bVR5
cGUsIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBib29sIElzRW51bVR5cGUo
R2xvYmFsSXRlbSBlZG1UeXBlKQogICAgewogICAgICAgIEFyZ3VtZW50Tm90
TnVsbChlZG1UeXBlLCAiZWRtVHlwZSIpOwoKICAgICAgICByZXR1cm4gZWRt
VHlwZS5HZXRUeXBlKCkuTmFtZSA9PSAiRW51bVR5cGUiOwogICAgfQoKICAg
IHB1YmxpYyBQcmltaXRpdmVUeXBlIEdldEVudW1VbmRlcmx5aW5nVHlwZShF
ZG1UeXBlIGVudW1UeXBlKQogICAgewogICAgICAgIEFyZ3VtZW50Tm90TnVs
bChlbnVtVHlwZSwgImVudW1UeXBlIik7CgogICAgICAgIHJldHVybiAoUHJp
bWl0aXZlVHlwZSllbnVtVHlwZS5HZXRUeXBlKCkuR2V0UHJvcGVydHkoIlVu
ZGVybHlpbmdUeXBlIikuR2V0VmFsdWUoZW51bVR5cGUsIG51bGwpOwogICAg
fQoKICAgIHB1YmxpYyBzdHJpbmcgQ3JlYXRlTGl0ZXJhbChvYmplY3QgdmFs
dWUpCiAgICB7CiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUu
R2V0VHlwZSgpICE9IHR5cGVvZihUaW1lU3BhbikpCiAgICAgICAgewogICAg
ICAgICAgICByZXR1cm4gX2NvZGUuQ3JlYXRlTGl0ZXJhbCh2YWx1ZSk7CiAg
ICAgICAgfQoKICAgICAgICByZXR1cm4gc3RyaW5nLkZvcm1hdChDdWx0dXJl
SW5mby5JbnZhcmlhbnRDdWx0dXJlLCAibmV3IFRpbWVTcGFuKHswfSkiLCAo
KFRpbWVTcGFuKXZhbHVlKS5UaWNrcyk7CiAgICB9CiAgICAKICAgIHB1Ymxp
YyBib29sIFZlcmlmeUNhc2VJbnNlbnNpdGl2ZVR5cGVVbmlxdWVuZXNzKElF
bnVtZXJhYmxlPHN0cmluZz4gdHlwZXMsIHN0cmluZyBzb3VyY2VGaWxlKQog
ICAgewogICAgICAgIEFyZ3VtZW50Tm90TnVsbCh0eXBlcywgInR5cGVzIik7
CiAgICAgICAgQXJndW1lbnROb3ROdWxsKHNvdXJjZUZpbGUsICJzb3VyY2VG
aWxlIik7CiAgICAgICAgCiAgICAgICAgdmFyIGhhc2ggPSBuZXcgSGFzaFNl
dDxzdHJpbmc+KFN0cmluZ0NvbXBhcmVyLkludmFyaWFudEN1bHR1cmVJZ25v
cmVDYXNlKTsKICAgICAgICBpZiAodHlwZXMuQW55KGl0ZW0gPT4gIWhhc2gu
QWRkKGl0ZW0pKSkKICAgICAgICB7CiAgICAgICAgICAgIF9lcnJvcnMuQWRk
KAogICAgICAgICAgICAgICAgbmV3IENvbXBpbGVyRXJyb3Ioc291cmNlRmls
ZSwgLTEsIC0xLCAiNjAyMyIsCiAgICAgICAgICAgICAgICAgICAgU3RyaW5n
LkZvcm1hdChDdWx0dXJlSW5mby5DdXJyZW50Q3VsdHVyZSwgQ29kZUdlbmVy
YXRpb25Ub29scy5HZXRSZXNvdXJjZVN0cmluZygiVGVtcGxhdGVfQ2FzZUlu
c2Vuc2l0aXZlVHlwZUNvbmZsaWN0IikpKSk7CiAgICAgICAgICAgIHJldHVy
biBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9
CiAgICAKICAgIHB1YmxpYyBJRW51bWVyYWJsZTxTaW1wbGVUeXBlPiBHZXRF
bnVtSXRlbXNUb0dlbmVyYXRlKElFbnVtZXJhYmxlPEdsb2JhbEl0ZW0+IGl0
ZW1Db2xsZWN0aW9uKQogICAgewogICAgICAgIHJldHVybiBHZXRJdGVtc1Rv
R2VuZXJhdGU8U2ltcGxlVHlwZT4oaXRlbUNvbGxlY3Rpb24pCiAgICAgICAg
ICAgIC5XaGVyZShlID0+IElzRW51bVR5cGUoZSkpOwogICAgfQogICAgCiAg
ICBwdWJsaWMgSUVudW1lcmFibGU8VD4gR2V0SXRlbXNUb0dlbmVyYXRlPFQ+
KElFbnVtZXJhYmxlPEdsb2JhbEl0ZW0+IGl0ZW1Db2xsZWN0aW9uKSB3aGVy
ZSBUOiBFZG1UeXBlCiAgICB7CiAgICAgICAgcmV0dXJuIGl0ZW1Db2xsZWN0
aW9uCiAgICAgICAgICAgIC5PZlR5cGU8VD4oKQogICAgICAgICAgICAuV2hl
cmUoaSA9PiAhaS5NZXRhZGF0YVByb3BlcnRpZXMuQW55KHAgPT4gcC5OYW1l
ID09IEV4dGVybmFsVHlwZU5hbWVBdHRyaWJ1dGVOYW1lKSkKICAgICAgICAg
ICAgLk9yZGVyQnkoaSA9PiBpLk5hbWUpOwogICAgfQoKICAgIHB1YmxpYyBJ
RW51bWVyYWJsZTxzdHJpbmc+IEdldEFsbEdsb2JhbEl0ZW1zKElFbnVtZXJh
YmxlPEdsb2JhbEl0ZW0+IGl0ZW1Db2xsZWN0aW9uKQogICAgewogICAgICAg
IHJldHVybiBpdGVtQ29sbGVjdGlvbgogICAgICAgICAgICAuV2hlcmUoaSA9
PiBpIGlzIEVudGl0eVR5cGUgfHwgaSBpcyBDb21wbGV4VHlwZSB8fCBpIGlz
IEVudGl0eUNvbnRhaW5lciB8fCBJc0VudW1UeXBlKGkpKQogICAgICAgICAg
ICAuU2VsZWN0KGcgPT4gR2V0R2xvYmFsSXRlbU5hbWUoZykpOwogICAgfQoK
ICAgIHB1YmxpYyBzdHJpbmcgR2V0R2xvYmFsSXRlbU5hbWUoR2xvYmFsSXRl
bSBpdGVtKQogICAgewogICAgICAgIGlmIChpdGVtIGlzIEVkbVR5cGUpCiAg
ICAgICAgewogICAgICAgICAgICByZXR1cm4gKChFZG1UeXBlKWl0ZW0pLk5h
bWU7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAg
ICAgIHJldHVybiAoKEVudGl0eUNvbnRhaW5lcilpdGVtKS5OYW1lOwogICAg
ICAgIH0KICAgIH0KCiAgICBwdWJsaWMgSUVudW1lcmFibGU8RWRtUHJvcGVy
dHk+IEdldFNpbXBsZVByb3BlcnRpZXMoRW50aXR5VHlwZSB0eXBlKQogICAg
ewogICAgICAgIHJldHVybiB0eXBlLlByb3BlcnRpZXMuV2hlcmUocCA9PiBw
LlR5cGVVc2FnZS5FZG1UeXBlIGlzIFNpbXBsZVR5cGUgJiYgcC5EZWNsYXJp
bmdUeXBlID09IHR5cGUpOwogICAgfQogICAgCiAgICBwdWJsaWMgSUVudW1l
cmFibGU8RWRtUHJvcGVydHk+IEdldFNpbXBsZVByb3BlcnRpZXMoQ29tcGxl
eFR5cGUgdHlwZSkKICAgIHsKICAgICAgICByZXR1cm4gdHlwZS5Qcm9wZXJ0
aWVzLldoZXJlKHAgPT4gcC5UeXBlVXNhZ2UuRWRtVHlwZSBpcyBTaW1wbGVU
eXBlICYmIHAuRGVjbGFyaW5nVHlwZSA9PSB0eXBlKTsKICAgIH0KICAgIAog
ICAgcHVibGljIElFbnVtZXJhYmxlPEVkbVByb3BlcnR5PiBHZXRDb21wbGV4
UHJvcGVydGllcyhFbnRpdHlUeXBlIHR5cGUpCiAgICB7CiAgICAgICAgcmV0
dXJuIHR5cGUuUHJvcGVydGllcy5XaGVyZShwID0+IHAuVHlwZVVzYWdlLkVk
bVR5cGUgaXMgQ29tcGxleFR5cGUgJiYgcC5EZWNsYXJpbmdUeXBlID09IHR5
cGUpOwogICAgfQogICAgCiAgICBwdWJsaWMgSUVudW1lcmFibGU8RWRtUHJv
cGVydHk+IEdldENvbXBsZXhQcm9wZXJ0aWVzKENvbXBsZXhUeXBlIHR5cGUp
CiAgICB7CiAgICAgICAgcmV0dXJuIHR5cGUuUHJvcGVydGllcy5XaGVyZShw
ID0+IHAuVHlwZVVzYWdlLkVkbVR5cGUgaXMgQ29tcGxleFR5cGUgJiYgcC5E
ZWNsYXJpbmdUeXBlID09IHR5cGUpOwogICAgfQoKICAgIHB1YmxpYyBJRW51
bWVyYWJsZTxFZG1Qcm9wZXJ0eT4gR2V0UHJvcGVydGllc1dpdGhEZWZhdWx0
VmFsdWVzKEVudGl0eVR5cGUgdHlwZSkKICAgIHsKICAgICAgICByZXR1cm4g
dHlwZS5Qcm9wZXJ0aWVzLldoZXJlKHAgPT4gcC5UeXBlVXNhZ2UuRWRtVHlw
ZSBpcyBTaW1wbGVUeXBlICYmIHAuRGVjbGFyaW5nVHlwZSA9PSB0eXBlICYm
IHAuRGVmYXVsdFZhbHVlICE9IG51bGwpOwogICAgfQogICAgCiAgICBwdWJs
aWMgSUVudW1lcmFibGU8RWRtUHJvcGVydHk+IEdldFByb3BlcnRpZXNXaXRo
RGVmYXVsdFZhbHVlcyhDb21wbGV4VHlwZSB0eXBlKQogICAgewogICAgICAg
IHJldHVybiB0eXBlLlByb3BlcnRpZXMuV2hlcmUocCA9PiBwLlR5cGVVc2Fn
ZS5FZG1UeXBlIGlzIFNpbXBsZVR5cGUgJiYgcC5EZWNsYXJpbmdUeXBlID09
IHR5cGUgJiYgcC5EZWZhdWx0VmFsdWUgIT0gbnVsbCk7CiAgICB9CgogICAg
cHVibGljIElFbnVtZXJhYmxlPE5hdmlnYXRpb25Qcm9wZXJ0eT4gR2V0TmF2
aWdhdGlvblByb3BlcnRpZXMoRW50aXR5VHlwZSB0eXBlKQogICAgewogICAg
ICAgIHJldHVybiB0eXBlLk5hdmlnYXRpb25Qcm9wZXJ0aWVzLldoZXJlKG5w
ID0+IG5wLkRlY2xhcmluZ1R5cGUgPT0gdHlwZSk7CiAgICB9CiAgICAKICAg
IHB1YmxpYyBJRW51bWVyYWJsZTxOYXZpZ2F0aW9uUHJvcGVydHk+IEdldENv
bGxlY3Rpb25OYXZpZ2F0aW9uUHJvcGVydGllcyhFbnRpdHlUeXBlIHR5cGUp
CiAgICB7CiAgICAgICAgcmV0dXJuIHR5cGUuTmF2aWdhdGlvblByb3BlcnRp
ZXMuV2hlcmUobnAgPT4gbnAuRGVjbGFyaW5nVHlwZSA9PSB0eXBlICYmIG5w
LlRvRW5kTWVtYmVyLlJlbGF0aW9uc2hpcE11bHRpcGxpY2l0eSA9PSBSZWxh
dGlvbnNoaXBNdWx0aXBsaWNpdHkuTWFueSk7CiAgICB9CiAgICAKICAgIHB1
YmxpYyBGdW5jdGlvblBhcmFtZXRlciBHZXRSZXR1cm5QYXJhbWV0ZXIoRWRt
RnVuY3Rpb24gZWRtRnVuY3Rpb24pCiAgICB7CiAgICAgICAgQXJndW1lbnRO
b3ROdWxsKGVkbUZ1bmN0aW9uLCAiZWRtRnVuY3Rpb24iKTsKCiAgICAgICAg
dmFyIHJldHVyblBhcmFtc1Byb3BlcnR5ID0gZWRtRnVuY3Rpb24uR2V0VHlw
ZSgpLkdldFByb3BlcnR5KCJSZXR1cm5QYXJhbWV0ZXJzIik7CiAgICAgICAg
cmV0dXJuIHJldHVyblBhcmFtc1Byb3BlcnR5ID09IG51bGwKICAgICAgICAg
ICAgPyBlZG1GdW5jdGlvbi5SZXR1cm5QYXJhbWV0ZXIKICAgICAgICAgICAg
OiAoKElFbnVtZXJhYmxlPEZ1bmN0aW9uUGFyYW1ldGVyPilyZXR1cm5QYXJh
bXNQcm9wZXJ0eS5HZXRWYWx1ZShlZG1GdW5jdGlvbiwgbnVsbCkpLkZpcnN0
T3JEZWZhdWx0KCk7CiAgICB9CgogICAgcHVibGljIGJvb2wgSXNDb21wb3Nh
YmxlKEVkbUZ1bmN0aW9uIGVkbUZ1bmN0aW9uKQogICAgewogICAgICAgIEFy
Z3VtZW50Tm90TnVsbChlZG1GdW5jdGlvbiwgImVkbUZ1bmN0aW9uIik7Cgog
ICAgICAgIHZhciBpc0NvbXBvc2FibGVQcm9wZXJ0eSA9IGVkbUZ1bmN0aW9u
LkdldFR5cGUoKS5HZXRQcm9wZXJ0eSgiSXNDb21wb3NhYmxlQXR0cmlidXRl
Iik7CiAgICAgICAgcmV0dXJuIGlzQ29tcG9zYWJsZVByb3BlcnR5ICE9IG51
bGwgJiYgKGJvb2wpaXNDb21wb3NhYmxlUHJvcGVydHkuR2V0VmFsdWUoZWRt
RnVuY3Rpb24sIG51bGwpOwogICAgfQoKICAgIHB1YmxpYyBJRW51bWVyYWJs
ZTxGdW5jdGlvbkltcG9ydFBhcmFtZXRlcj4gR2V0UGFyYW1ldGVycyhFZG1G
dW5jdGlvbiBlZG1GdW5jdGlvbikKICAgIHsKICAgICAgICByZXR1cm4gRnVu
Y3Rpb25JbXBvcnRQYXJhbWV0ZXIuQ3JlYXRlKGVkbUZ1bmN0aW9uLlBhcmFt
ZXRlcnMsIF9jb2RlLCBfZWYpOwogICAgfQoKICAgIHB1YmxpYyBUeXBlVXNh
Z2UgR2V0UmV0dXJuVHlwZShFZG1GdW5jdGlvbiBlZG1GdW5jdGlvbikKICAg
IHsKICAgICAgICB2YXIgcmV0dXJuUGFyYW0gPSBHZXRSZXR1cm5QYXJhbWV0
ZXIoZWRtRnVuY3Rpb24pOwogICAgICAgIHJldHVybiByZXR1cm5QYXJhbSA9
PSBudWxsID8gbnVsbCA6IF9lZi5HZXRFbGVtZW50VHlwZShyZXR1cm5QYXJh
bS5UeXBlVXNhZ2UpOwogICAgfQogICAgCiAgICBwdWJsaWMgYm9vbCBHZW5l
cmF0ZU1lcmdlT3B0aW9uRnVuY3Rpb24oRWRtRnVuY3Rpb24gZWRtRnVuY3Rp
b24sIGJvb2wgaW5jbHVkZU1lcmdlT3B0aW9uKQogICAgewogICAgICAgIHZh
ciByZXR1cm5UeXBlID0gR2V0UmV0dXJuVHlwZShlZG1GdW5jdGlvbik7CiAg
ICAgICAgcmV0dXJuICFpbmNsdWRlTWVyZ2VPcHRpb24gJiYgcmV0dXJuVHlw
ZSAhPSBudWxsICYmIHJldHVyblR5cGUuRWRtVHlwZS5CdWlsdEluVHlwZUtp
bmQgPT0gQnVpbHRJblR5cGVLaW5kLkVudGl0eVR5cGU7CiAgICB9Cn0KCnB1
YmxpYyBzdGF0aWMgdm9pZCBBcmd1bWVudE5vdE51bGw8VD4oVCBhcmcsIHN0
cmluZyBuYW1lKSB3aGVyZSBUIDogY2xhc3MKewogICAgaWYgKGFyZyA9PSBu
dWxsKQogICAgewogICAgICAgIHRocm93IG5ldyBBcmd1bWVudE51bGxFeGNl
cHRpb24obmFtZSk7CiAgICB9Cn0KIz4=
